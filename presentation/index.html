<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.555">

  <meta name="author" content="Lars Vilhuber">
  <meta name="dcterms.date" content="2024-06-30">
  <title>Checking reproducibility on Day T</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Checking reproducibility on Day T</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Lars Vilhuber 
</div>
</div>
</div>

  <p class="date">2024-06-30</p>
</section>
<section class="slide level2 center">


<img data-src="https://teleseries.com.br/wp-content/uploads/2013/11/tumblr_lr9o5nVNb41qknbv6.gif" class="r-stretch"></section>
<section id="day-t" class="slide level2 smaller center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Day T</h2>
</section>
<section id="day-t-1" class="slide level2 smaller center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Day T<strong>-1</strong></h2>
</section>
<section>
<section id="introduction" class="title-slide slide level1 center">
<h1>Introduction</h1>
<p>This document describes a few <strong>possible</strong> steps to self-check replication packages before submitting them to a journal. It is not meant to be exhaustive, and it is not meant to be prescriptive. There are <strong>many ways to construc</strong>t a replication package, and many more to check that it works.</p>
</section>
<section id="computational-empathy" class="slide level2 center">
<h2>Computational Empathy</h2>
<p>The key ingredient is what I call “<strong>computational empathy</strong>” - thinking about what an unknown person attempting to reproduce the results in your paper might face, <strong>what they might know and assume</strong>, and more importantly, <strong>what they might not know</strong> or know to assume. While the replication package might very well run on your computer, that is by no means evidence that it will run on someone else’s computer.</p>
</section>
<section id="prerequisites" class="slide level2 smaller center">
<h2>Prerequisites</h2>
<p>In what follows, we will assume that the replicator satisfies the following conditions:</p>
<div>
<ul>
<li class="fragment">they are familiar with their own <strong>operating system</strong> (not yours!)</li>
<li class="fragment">they are somewhat familiar with <strong>how to run code</strong> in the “dominant” programming language in your field (but…)</li>
<li class="fragment">they are <strong>probably not familiar</strong> with cutting edge methods of running software that you might be using (but want to learn!)</li>
<li class="fragment">they likely have some experience with <strong>how social scientists write code</strong> and prepare data, but may not have your years of experience</li>
</ul>
</div>
</section>
<section id="tldr" class="slide level2 center">
<h2>TL;DR</h2>
<p>Techy lingo for “<strong>too long, didn’t read</strong>”. A summary of the most important takeaways will be at the top of each section.</p>
</section></section>
<section id="targets" class="title-slide slide level1 smaller center">
<h1>Targets</h1>
<p>We want to check that</p>
<div>
<ul class="task-list">
<li class="fragment"><label><input type="checkbox">your code runs without problem, after all the debugging.</label></li>
<li class="fragment"><label><input type="checkbox">it actually produces all the outputs</label></li>
<li class="fragment"><label><input type="checkbox">your code runs without manual intervention, and with low effort.</label></li>
<li class="fragment"><label><input type="checkbox">your code generates a log file that you can inspect, and that you could share with others.</label></li>
<li class="fragment"><label><input type="checkbox">it will run on somebody else’s computer</label></li>
</ul>
</div>
</section>

<section id="why" class="title-slide slide level1 center">
<h1>Why</h1>
<div class="columns">
<div class="column" style="width:50%;">
<p>Unpredictable things happening to your computing environment:</p>
<ul>
<li>Software updates</li>
<li>Change of employer</li>
<li>Sudden need for a new computer</li>
</ul>
</div><div class="column" style="width:50%;">
<p><img data-src="https://media1.tenor.com/m/1L7rJphSMxQAAAAC/fail-fall.gif"></p>
</div>
</div>
</section>

<section>
<section id="run-it-all-again" class="title-slide slide level1 center">
<h1>Run it all again</h1>
<p>The very first test is that your code must run, beginning to end, top to bottom, without error, and ideally without any user intervention. This should in principle (re)create all figures, tables, and numbers you include in your paper.</p>
</section>
<section id="tldr-1" class="slide level2 center">
<h2>TL;DR</h2>
<p>This is pretty much the most basic test of reproducibility. If you cannot run your code, you cannot reproduce your results, nor can anybody else. So just re-run the code.</p>
</section>
<section id="exceptions" class="slide level2 center">
<h2>Exceptions</h2>
</section>
<section id="code-runs-for-a-very-long-time" class="slide level2 center">
<h2>Code runs for a very long time</h2>
<p>What happens when some of these re-runs are very long? See later in this chapter for how to handle this.</p>
</section>
<section id="making-the-code-run-takes-you-a-very-long-time" class="slide level2 center">
<h2>Making the code run takes YOU a very long time</h2>
<p>While the code, once set to run, can do so on its own, <em>you</em> might need to spend a lot of time getting all the various pieces to run.</p>
</section>
<section class="slide level2 center">

<p><img data-src="images/Red-Warning-PNG-Clipart.png" class="center" width="350" height="300"></p>
<p><em>This should be a warning sign:</em></p>
<p>If it takes you a long time to get it to run, or to manually reproduce the results, it <strong>might take others even longer</strong>.<a href="#/footnotes" class="footnote-ref" id="fnref1" role="doc-noteref" data-footnote-href="#/fn1" onclick=""><sup>1</sup></a></p>
<aside></aside></section>
<section class="slide level2 center">

<p>Furthermore, it may suggest that you <strong>haven’t been able to re-run</strong> your own code very often, which can be indicate <strong>fragility</strong> or even <strong>lack of reproducibility</strong>.</p>
</section>
<section id="takeaways" class="slide level2 smaller center">
<h2>Takeaways</h2>
<div>
<ul class="task-list">
<li class="fragment"><label><input type="checkbox" checked="">your code runs without problem, after all the debugging.</label></li>
<li class="fragment"><label><input type="checkbox">your code runs without manual intervention, and with low effort</label></li>
<li class="fragment"><label><input type="checkbox">it actually produces all the outputs</label></li>
<li class="fragment"><label><input type="checkbox">your code generates a log file that you can inspect, and that you could share with others.</label></li>
<li class="fragment"><label><input type="checkbox">it will run on somebody else’s computer</label></li>
</ul>
</div>
</section></section>
<section>
<section id="why-is-this-not-enough" class="title-slide slide level1 center">
<h1>Why is this not enough?</h1>

</section>
<section id="does-your-code-run-without-manual-intervention" class="slide level2 center">
<h2>Does your code run without manual intervention?</h2>
<p>Automation and robustness checks, as well as efficiency.</p>
</section>
<section id="can-you-provide-evidence-that-you-ran-it" class="slide level2 center">
<h2>Can you provide evidence that you ran it?</h2>
<p>Generating a log file means that you can inspect it, and you can share it with others. Also helps in debugging, for you and others.</p>
</section>
<section id="will-it-run-on-somebody-elses-computer" class="slide level2 smaller center">
<h2>Will it run on somebody else’s computer?</h2>
<p>Running it again does not help:</p>
<div>
<ul>
<li class="fragment">because it does not guarantee that somebody else has all the software (including packages!)</li>
<li class="fragment">because it does not guarantee that all the directories for input or output are there</li>
<li class="fragment">because many intermediate files might be present that are not in the replication package</li>
<li class="fragment">because you might have run things out of sequence, or relied on previously generated files in ways that won’t work for others</li>
<li class="fragment">because some outputs might be present from test runs, but actually fail in this run</li>
</ul>
</div>
</section></section>
<section>
<section id="hands-off-running-creating-a-controller-script" class="title-slide slide level1 center">
<h1>Hands-off running: Creating a controller script</h1>
<p>Did it take you a long time to run everything again?</p>

<img data-src="https://c.tenor.com/4qs0klfg8nMAAAAC/tenor.gif" class="r-stretch quarto-figure-center"><p class="caption">⏳</p></section>
<section id="lets-ramp-it-up-a-bit." class="slide level2 center">
<h2>Let’s ramp it up a bit.</h2>
<ul>
<li><p>Your code must run, <strong>beginning to end</strong>, top to bottom, without error, and <strong>without any user intervention</strong>.</p></li>
<li><p>This should in principle (re)create all <strong>figures</strong>, <strong>tables</strong>, and <strong>in-text numbers</strong> you include in your paper.</p></li>
</ul>
<aside class="notes">
<p>We have seen users who appear to highlight code and to run it interactively, in pieces, using the program file as a kind of notepad. This is not reproducible, and should be avoided. It is fine for debugging.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="seem-trivial" class="slide level2 center">
<h2>Seem trivial?</h2>
<blockquote>
<p>Out of <strong>8280</strong> replication packages in ~20 top econ journals, only <strong>2594</strong> (<strong>31.33%</strong>) had a main/controller script.<a href="#/footnotes" class="footnote-ref" id="fnref2" role="doc-noteref" data-footnote-href="#/fn2" onclick=""><sup>2</sup></a></p>
</blockquote>
<aside></aside></section>
<section id="tldr-2" class="slide level2 center">
<h2>TL;DR</h2>
<ul>
<li>Create a “main” file that runs all the other files in the correct order.</li>
<li>Run this file, without user intervention.</li>
<li>It should run without error.</li>
</ul>
</section>
<section id="creating-a-main-or-master-script" class="slide level2 center">
<h2>Creating a main or master script</h2>
<p>In order to be able to enable “hands-off running”, the <strong>main (controller) script is key</strong>. I will show here a few simple examples for single-software replication packages. We will discuss more complex examples in one of the next chapters.</p>
</section>
<section id="examples" class="slide level2 center">
<h2>Examples</h2>
</section>
<section id="stata" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Stata</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>Set the root directory (dynamically)</p>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb1" data-code-line-numbers="1-2"><pre class="sourceCode numberSource stata number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode stata hljs"><span id="cb1-1" class="hljs-ln-code"><a href=""></a>* main.<span class="kw">do</span></span>
<span id="cb1-2" class="hljs-ln-code"><a href=""></a><span class="kw">global</span> rootdir : pwd</span>
<span id="cb1-3" class="hljs-ln-code"><a href=""></a>* Run the <span class="kw">data</span> preparation file</span>
<span id="cb1-4" class="hljs-ln-code"><a href=""></a><span class="kw">do</span> <span class="ot">$rootdir</span>/01_data_prep.<span class="kw">do</span></span>
<span id="cb1-5" class="hljs-ln-code"><a href=""></a>* Run the analysis file</span>
<span id="cb1-6" class="hljs-ln-code"><a href=""></a><span class="kw">do</span> <span class="ot">$rootdir</span>/02_analysis.<span class="kw">do</span></span>
<span id="cb1-7" class="hljs-ln-code"><a href=""></a>* Run the <span class="kw">table</span> file</span>
<span id="cb1-8" class="hljs-ln-code"><a href=""></a><span class="kw">do</span> <span class="ot">$rootdir</span>/03_tables.<span class="kw">do</span></span>
<span id="cb1-9" class="hljs-ln-code"><a href=""></a>* Run the figure file</span>
<span id="cb1-10" class="hljs-ln-code"><a href=""></a><span class="kw">do</span> <span class="ot">$rootdir</span>/04_figures.<span class="kw">do</span></span>
<span id="cb1-11" class="hljs-ln-code"><a href=""></a>* Run the appendix file</span>
<span id="cb1-12" class="hljs-ln-code"><a href=""></a><span class="kw">do</span> <span class="ot">$rootdir</span>/05_appendix.<span class="kw">do</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="stata-1" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Stata</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>Call the various files that consitute your complete analysis.</p>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb2" data-code-line-numbers="4,6,8,10,12"><pre class="sourceCode numberSource stata number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode stata hljs"><span id="cb2-1" class="hljs-ln-code"><a href=""></a>* main.<span class="kw">do</span></span>
<span id="cb2-2" class="hljs-ln-code"><a href=""></a><span class="kw">global</span> rootdir : pwd</span>
<span id="cb2-3" class="hljs-ln-code"><a href=""></a>* Run the <span class="kw">data</span> preparation file</span>
<span id="cb2-4" class="hljs-ln-code"><a href=""></a><span class="kw">do</span> <span class="ot">$rootdir</span>/01_data_prep.<span class="kw">do</span></span>
<span id="cb2-5" class="hljs-ln-code"><a href=""></a>* Run the analysis file</span>
<span id="cb2-6" class="hljs-ln-code"><a href=""></a><span class="kw">do</span> <span class="ot">$rootdir</span>/02_analysis.<span class="kw">do</span></span>
<span id="cb2-7" class="hljs-ln-code"><a href=""></a>* Run the <span class="kw">table</span> file</span>
<span id="cb2-8" class="hljs-ln-code"><a href=""></a><span class="kw">do</span> <span class="ot">$rootdir</span>/03_tables.<span class="kw">do</span></span>
<span id="cb2-9" class="hljs-ln-code"><a href=""></a>* Run the figure file</span>
<span id="cb2-10" class="hljs-ln-code"><a href=""></a><span class="kw">do</span> <span class="ot">$rootdir</span>/04_figures.<span class="kw">do</span></span>
<span id="cb2-11" class="hljs-ln-code"><a href=""></a>* Run the appendix file</span>
<span id="cb2-12" class="hljs-ln-code"><a href=""></a><span class="kw">do</span> <span class="ot">$rootdir</span>/05_appendix.<span class="kw">do</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="notes" class="slide level2 center">
<h2>Notes</h2>
<ul>
<li>The use of <code>do</code> (instead of <code>run</code> or even <code>capture run</code>) is best, as it will show the code that is being run, and is thus more transparent to you and the future replicator.</li>
</ul>
</section>
<section id="notes-1" class="slide level2 center">
<h2>Notes</h2>
<ul>
<li>Run this using the <a href="https://labordynamicsinstitute.github.io/ldilab-manual/96-02-running-stata-code.html#step-6-run-the-code">right-click method</a> (Windows) or from the terminal (macOS, Linux):</li>
</ul>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="images/execute-do-cropped.png"></p>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href=""></a><span class="bu">cd</span> /where/my/code/is</span>
<span id="cb3-2"><a href=""></a><span class="ex">stata-mp</span> <span class="at">-b</span> do main.do</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>where <code>stata-mp</code> should be replaced with <code>stata</code> or <code>stata-se</code> depending on your licensed version.</p>
</div>
</div>
</section>
<section id="r" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">R</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>Set the root directory (using <code>here()</code> or <code>rprojroot()</code>).</p>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb4" data-code-line-numbers="3-4"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb4-1" class="hljs-ln-code"><a href=""></a><span class="co"># main.R</span></span>
<span id="cb4-2" class="hljs-ln-code"><a href=""></a><span class="do">## Set the root directory</span></span>
<span id="cb4-3" class="hljs-ln-code"><a href=""></a><span class="co"># If you are using Rproj files or git</span></span>
<span id="cb4-4" class="hljs-ln-code"><a href=""></a>rootdir <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>()</span>
<span id="cb4-5" class="hljs-ln-code"><a href=""></a><span class="co"># or if not</span></span>
<span id="cb4-6" class="hljs-ln-code"><a href=""></a><span class="co"># rootdir &lt;- getwd()</span></span>
<span id="cb4-7" class="hljs-ln-code"><a href=""></a><span class="do">## Run the data preparation file</span></span>
<span id="cb4-8" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"01_data_prep.R"</span>), </span>
<span id="cb4-9" class="hljs-ln-code"><a href=""></a>       <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-10" class="hljs-ln-code"><a href=""></a><span class="do">## Run the analysis file</span></span>
<span id="cb4-11" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"02_analysis.R"</span>), </span>
<span id="cb4-12" class="hljs-ln-code"><a href=""></a>       <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-13" class="hljs-ln-code"><a href=""></a><span class="do">## Run the table file</span></span>
<span id="cb4-14" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"03_tables.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-15" class="hljs-ln-code"><a href=""></a><span class="do">## Run the figure file</span></span>
<span id="cb4-16" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"04_figures.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-17" class="hljs-ln-code"><a href=""></a><span class="do">## Run the appendix file</span></span>
<span id="cb4-18" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"05_appendix.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="r-1" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">R</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>Call each of the component programs, using <code>source()</code>.</p>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb5" data-code-line-numbers="8-9|11-12|14|16|18"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb5-1" class="hljs-ln-code"><a href=""></a><span class="co"># main.R</span></span>
<span id="cb5-2" class="hljs-ln-code"><a href=""></a><span class="do">## Set the root directory</span></span>
<span id="cb5-3" class="hljs-ln-code"><a href=""></a><span class="co"># If you are using Rproj files or git</span></span>
<span id="cb5-4" class="hljs-ln-code"><a href=""></a>rootdir <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>()</span>
<span id="cb5-5" class="hljs-ln-code"><a href=""></a><span class="co"># or if not</span></span>
<span id="cb5-6" class="hljs-ln-code"><a href=""></a><span class="co"># rootdir &lt;- getwd()</span></span>
<span id="cb5-7" class="hljs-ln-code"><a href=""></a><span class="do">## Run the data preparation file</span></span>
<span id="cb5-8" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"01_data_prep.R"</span>), </span>
<span id="cb5-9" class="hljs-ln-code"><a href=""></a>       <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-10" class="hljs-ln-code"><a href=""></a><span class="do">## Run the analysis file</span></span>
<span id="cb5-11" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"02_analysis.R"</span>), </span>
<span id="cb5-12" class="hljs-ln-code"><a href=""></a>       <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-13" class="hljs-ln-code"><a href=""></a><span class="do">## Run the table file</span></span>
<span id="cb5-14" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"03_tables.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-15" class="hljs-ln-code"><a href=""></a><span class="do">## Run the figure file</span></span>
<span id="cb5-16" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"04_figures.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-17" class="hljs-ln-code"><a href=""></a><span class="do">## Run the appendix file</span></span>
<span id="cb5-18" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"05_appendix.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="notes-for-r" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Notes for R</h2>
<p>The use of <code>echo=TRUE</code> is best, as it will show the code that is being run, and is thus more transparent to you and the future replicator.</p>
</section>
<section id="notes-for-r-1" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Notes for R</h2>
<p>Even if you are using Rstudio, run this using the <a href="https://labordynamicsinstitute.github.io/ldilab-manual/96-12-running-r-code.html">terminal method</a> in Rstudio for any platform, or from the terminal (macOS, Linux):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb6-1" class="hljs-ln-code"><a href=""></a><span class="bu">cd</span> /where/my/code/is</span>
<span id="cb6-2" class="hljs-ln-code"><a href=""></a><span class="ex">R</span> CMD BATCH main.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Do not use <code>Rscript</code>, as it will not generate enough output!</p>
</section>
<section id="other-examples" class="slide level2 center">
<h2>Other examples</h2>
<p>For examples for <strong>Julia, Python, MATLAB,</strong> and <strong>multi-software scripts</strong>, see the <a href="https://larsvilhuber.github.io/self-checking-reproducibility/02-hands_off_running.html">full text</a>.</p>
</section>
<section id="takeaways-1" class="slide level2 smaller center">
<h2>Takeaways</h2>
<ul class="task-list">
<li><label><input type="checkbox" checked="">your code runs without problem, after all the debugging.</label></li>
<li><label><input type="checkbox" checked="">your code runs without manual intervention, and with low effort</label></li>
<li><label><input type="checkbox">it actually produces all the outputs</label></li>
<li><label><input type="checkbox">your code generates a log file that you can inspect, and that you could share with others.</label></li>
<li><label><input type="checkbox">it will run on somebody else’s computer</label></li>
</ul>
</section></section>
<section>
<section id="are-your-figures-missing" class="title-slide slide level1 center">
<h1>Are your figures missing?</h1>
<p>Do you usually <strong>right-click and save</strong> the figures?</p>
</section>
<section class="slide level2 center">

<p>Or <strong>copy-paste</strong> then into a Word document?</p>
</section></section>
<section>
<section id="hands-off-running-automatically-saving-figures" class="title-slide slide level1 center">
<h1>Hands-off running: Automatically saving figures</h1>
<p>Say you have 53 figures and 23 tables, the latter created from 161 different specifications. That makes for a lot of work when re-running the code, if you haven’t automated the saving of said figures and tables.</p>
<aside class="notes">
<p>We have seen instructions that tell the replicator to right-click and save the figures. While there is no substitute for comparing all these figures, that’s too much work!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="tldr-3" class="slide level2 center">
<h2>TL;DR</h2>
<ul>
<li>Save all figures using commands, rather than manually.</li>
<li>It’s easy.</li>
</ul>
</section>
<section id="saving-figures-programmatically" class="slide level2 center">
<h2>Saving figures programmatically</h2>
<p>In order to be able to enable “hands-off running”, saving figures (and tables) automatically is important. I will show here a few simple examples for various statistical programming languages.</p>
</section>
<section id="stata-2" class="slide level2 center">
<h2>Stata</h2>
<p>After having created the graph (“<code>graph twoway</code>”, “<code>graph bar</code>”, etc.), simply add “<code>graph export "name_of_file.graph-extension", replace</code>”. Many formats are available, as required by journal requirements.</p>
</section>
<section class="slide level2 center">

<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb7-1"><a href=""></a><span class="kw">sysuse</span> auto</span>
<span id="cb7-2"><a href=""></a><span class="kw">graph</span> <span class="kw">twoway</span> (lfitci mpg disp) (<span class="kw">scatter</span> mpg disp)</span>
<span id="cb7-3"><a href=""></a><span class="kw">graph</span> <span class="kw">export</span> <span class="st">"path/to/figure1.png"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For more information, see <a href="https://www.stata.com/manuals/g-2graphexport.pdf">https://www.stata.com/manuals/g-2graphexport.pdf</a>.</p>
</section>
<section id="r-2" class="slide level2 center">
<h2>R</h2>
<p>Methods vary, but the two main ones are redefining the graphics device for the desired format, or using the <code>ggsave</code> wrapper.</p>
</section>
<section class="slide level2 center">

<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a></span>
<span id="cb8-2"><a href=""></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-3"><a href=""></a><span class="fu">library</span>(here)</span>
<span id="cb8-4"><a href=""></a>figures <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"figures"</span>)</span>
<span id="cb8-5"><a href=""></a></span>
<span id="cb8-6"><a href=""></a>ggp <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars,<span class="fu">aes</span>(mpg,disp)) <span class="sc">+</span> </span>
<span id="cb8-7"><a href=""></a>       <span class="fu">geom_point</span>()<span class="sc">+</span> </span>
<span id="cb8-8"><a href=""></a>       <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>,<span class="at">geom=</span><span class="st">"smooth"</span> )</span>
<span id="cb8-9"><a href=""></a><span class="fu">ggsave</span>(ggp,<span class="fu">file.path</span>(figures,<span class="st">"figure1.png"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(for more information, see <a href="https://ggplot2.tidyverse.org/reference/ggsave.html">https://ggplot2.tidyverse.org/reference/ggsave.html</a>)</p>
</section>
<section id="for-more-examples" class="slide level2 center">
<h2>For more examples</h2>
<p>Python, MATLAB, other R methods - see the <a href="https://larsvilhuber.github.io/self-checking-reproducibility/03-automatically_saving_figures.html">full text</a>.</p>
<blockquote>
<p>In every programming language, this is simple!</p>
</blockquote>
<aside class="notes">
<p>If you want to create fancy figures with specific fonts and all sorts of widgets, you can do so, but you should not rely on that more complex code. Let the replicator create a figure that is close to, but not as fancy as yours. That’s enough!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="same-for-tables" class="slide level2 center">
<h2>Same for tables</h2>
<p>Learn how to save tables in robust, reproducible ways. Do not try to copy-paste from console!</p>
<h3 id="stata-3">Stata</h3>
<p><code>esttab</code> or <code>outreg2</code>, also <code>putexcel</code>. For fancier stuff, treat tables as data, use <code>regsave</code> or <code>export excel</code> to manipulate.</p>
<h3 id="r-3">R</h3>
<p><code>xtable</code>, <code>stargazer</code>, others.</p>
</section>
<section id="takeaways-2" class="slide level2 smaller center">
<h2>Takeaways</h2>
<ul class="task-list">
<li><label><input type="checkbox" checked="">your code runs without problem, after all the debugging.</label></li>
<li><label><input type="checkbox" checked="">your code runs without manual intervention, and with low effort</label></li>
<li><label><input type="checkbox" checked="">it actually produces all the outputs</label></li>
<li><label><input type="checkbox">your code generates a log file that you can inspect, and that you could share with others.</label></li>
<li><label><input type="checkbox">it will run on somebody else’s computer</label></li>
</ul>
</section></section>
<section>
<section id="next" class="title-slide slide level1 center">
<h1>Next…</h1>

</section>
<section class="slide level2 center">

<p><em>I want to get ahead of the game…</em></p>
</section>
<section class="slide level2 center">

<p><em>Somebody will ask “but I have confidential data…”</em></p>
</section></section>
<section>
<section id="so-what-happens-when" class="title-slide slide level1 center">
<h1>So what happens when…</h1>

</section>
<section id="you-cannot-share-a-file" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">You cannot share a file</h2>
</section>
<section id="the-file-no-longer-exists-on-the-internet" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">The file no longer exists on the internet</h2>
</section>
<section id="the-code-takes-ages-to-run" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">The code takes ages to run</h2>
</section>
<section class="slide level2 center">

<p>How can you show that you actually ran the code?</p>
</section>
<section class="slide level2 center">

<p><em>The question of how to provide access confidential data is a separate issue, with no simple solution.</em></p>
</section></section>
<section>
<section id="creating-log-files" class="title-slide slide level1 center">
<h1>Creating log files</h1>
<p>In order to document that you have actually run your code, a log file, a transcript, or some other evidence, may be useful. It may even be required by certain journals.</p>
</section>
<section id="tldr-4" class="slide level2 center">
<h2>TL;DR</h2>
<ul>
<li>Log files are a way to document that you have run your code.</li>
<li>In particular for code that runs for a very long time, or that uses data that cannot be shared, log files may be the only way to document basic reproducibility.</li>
</ul>
</section>
<section id="overview" class="slide level2 center">
<h2>Overview</h2>
<div>
<ul>
<li class="fragment">Most statistical software has ways to keep a record that it has run, with the details of that run.</li>
<li class="fragment">Some make it easier than others.</li>
<li class="fragment">You may need to instruct your code to be “verbose”, or to “log” certain events.</li>
<li class="fragment">You may need to use a command-line option to the software to create a log file.</li>
</ul>
</div>
<aside class="notes">
<p>I do note that we are typically only looking to document what the statistical code does, at a high level. We are not looking to document system calls, fine-grained data access, etc. Computer scientists and IT security mavens may be interested in such details, but economists are typically not.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2 center">

<p>In almost all cased, the generated log files are simple text files, without any formatting, and can be read by any text editor (e.g., Visual Studio Code, Notepad++, etc.).</p>
<p>If not, ensure that they are (avoid <em>Stata SMCL</em> files, for example).</p>
</section>
<section id="creating-log-files-explicitly" class="slide level2 center">
<h2>Creating log files explicitly</h2>
<p>We start by describing how to explicitly generate log files as part of the statistical processing code.</p>
</section>
<section id="stata-4" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Stata</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p>Start by creating a directory for the log files.</p>
</div><div class="column" style="width:70%;">
<div class="sourceCode" id="cb9" data-code-line-numbers="1-2"><pre class="sourceCode numberSource stata number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode stata hljs"><span id="cb9-1" class="hljs-ln-code"><a href=""></a><span class="kw">global</span> logdir <span class="st">"${rootdir}/logs"</span></span>
<span id="cb9-2" class="hljs-ln-code"><a href=""></a>cap <span class="kw">mkdir</span> <span class="st">"$logdir"</span></span>
<span id="cb9-3" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> c_date = c(current_date)</span>
<span id="cb9-4" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> cdate = <span class="fu">subinstr</span>(<span class="st">"`c_date'"</span>, <span class="st">" "</span>, <span class="st">"_"</span>, .)</span>
<span id="cb9-5" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> c_time = c(current_time)</span>
<span id="cb9-6" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> ctime = <span class="fu">subinstr</span>(<span class="st">"`c_time'"</span>, <span class="st">":"</span>, <span class="st">"_"</span>, .)</span>
<span id="cb9-7" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> logname = <span class="st">"`cdate'-`ctime'-`c(username)'"</span></span>
<span id="cb9-8" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> globallog = <span class="st">"$logdir/logfile_`logname'.log"</span></span>
<span id="cb9-9" class="hljs-ln-code"><a href=""></a><span class="fu">log</span> <span class="kw">using</span> <span class="st">"`globallog'"</span>, <span class="bn">name</span>(<span class="kw">global</span>) <span class="kw">replace</span> <span class="bn">text</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="stata-5" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Stata</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p>Add code to capture date, time, and who ran the code.</p>
</div><div class="column" style="width:70%;">
<div class="sourceCode" id="cb10" data-code-line-numbers="3-7"><pre class="sourceCode numberSource stata number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode stata hljs"><span id="cb10-1" class="hljs-ln-code"><a href=""></a><span class="kw">global</span> logdir <span class="st">"${rootdir}/logs"</span></span>
<span id="cb10-2" class="hljs-ln-code"><a href=""></a>cap <span class="kw">mkdir</span> <span class="st">"$logdir"</span></span>
<span id="cb10-3" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> c_date = c(current_date)</span>
<span id="cb10-4" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> cdate = <span class="fu">subinstr</span>(<span class="st">"`c_date'"</span>, <span class="st">" "</span>, <span class="st">"_"</span>, .)</span>
<span id="cb10-5" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> c_time = c(current_time)</span>
<span id="cb10-6" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> ctime = <span class="fu">subinstr</span>(<span class="st">"`c_time'"</span>, <span class="st">":"</span>, <span class="st">"_"</span>, .)</span>
<span id="cb10-7" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> logname = <span class="st">"`cdate'-`ctime'-`c(username)'"</span></span>
<span id="cb10-8" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> globallog = <span class="st">"$logdir/logfile_`logname'.log"</span></span>
<span id="cb10-9" class="hljs-ln-code"><a href=""></a><span class="fu">log</span> <span class="kw">using</span> <span class="st">"`globallog'"</span>, <span class="bn">name</span>(<span class="kw">global</span>) <span class="kw">replace</span> <span class="bn">text</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="stata-6" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Stata</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p>Create a logfile, giving it a name so it does not get closed.</p>
</div><div class="column" style="width:70%;">
<div class="sourceCode" id="cb11" data-code-line-numbers="8-9"><pre class="sourceCode numberSource stata number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode stata hljs"><span id="cb11-1" class="hljs-ln-code"><a href=""></a><span class="kw">global</span> logdir <span class="st">"${rootdir}/logs"</span></span>
<span id="cb11-2" class="hljs-ln-code"><a href=""></a>cap <span class="kw">mkdir</span> <span class="st">"$logdir"</span></span>
<span id="cb11-3" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> c_date = c(current_date)</span>
<span id="cb11-4" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> cdate = <span class="fu">subinstr</span>(<span class="st">"`c_date'"</span>, <span class="st">" "</span>, <span class="st">"_"</span>, .)</span>
<span id="cb11-5" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> c_time = c(current_time)</span>
<span id="cb11-6" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> ctime = <span class="fu">subinstr</span>(<span class="st">"`c_time'"</span>, <span class="st">":"</span>, <span class="st">"_"</span>, .)</span>
<span id="cb11-7" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> logname = <span class="st">"`cdate'-`ctime'-`c(username)'"</span></span>
<span id="cb11-8" class="hljs-ln-code"><a href=""></a><span class="kw">local</span> globallog = <span class="st">"$logdir/logfile_`logname'.log"</span></span>
<span id="cb11-9" class="hljs-ln-code"><a href=""></a><span class="fu">log</span> <span class="kw">using</span> <span class="st">"`globallog'"</span>, <span class="bn">name</span>(<span class="kw">global</span>) <span class="kw">replace</span> <span class="bn">text</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="notes-2" class="slide level2 center">
<h2>Notes</h2>
<ul>
<li>More examples</li>
<li>While some software (Stata, MATLAB) will create log files that contain <strong>commands and output</strong>, others (R, Python) will create log files that contain <strong>only output</strong>.</li>
</ul>
<h3 id="creating-log-files-automatically">Creating log files automatically</h3>
<p>An alternative (or complement) to creating log files explicitly is to use native functionality of the software to create them. This usually is triggered when using the command line to run the software, and thus may be considered an <strong>advanced topic.</strong> The examples below are for Linux/macOS, but similar functionality exists for Windows.</p>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Stata</a></li><li><a href="#tabset-1-2">R</a></li><li><a href="#tabset-1-3">MATLAB</a></li><li><a href="#tabset-1-4">Julia, Python</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p>To automatically create a log file, run Stata from the command line with the <code>-b</code> option:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href=""></a><span class="ex">stata</span> <span class="at">-b</span> do main.do</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>which will create a file <code>main.log</code> in the same directory as <code>main.do</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource notes number-lines code-with-copy"><code class="sourceCode"><span id="cb13-1"><a href=""></a>For this to work, the filename cannot include spaces.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>On Windows, follow instructions <a href="https://www.stata.com/manuals/gswb.pdf#gswB.5">here</a>.</p>
</div>
<div id="tabset-1-2">
<p>To automatically create a log file, run R from the command line as follows:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href=""></a><span class="ex">R</span> CMD BATCH main.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will create a file <code>main.Rout</code> in the same directory as <code>main.R</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource notes number-lines code-with-copy"><code class="sourceCode"><span id="cb15-1"><a href=""></a>If there are other commands, such as `sink()`, active in the R code, the `main.Rout` file will not contain some output.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-3">
<p>To automatically create a log file, run MATLAB from the command line as follows:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href=""></a><span class="ex">matlab</span> <span class="at">-nodisplay</span> <span class="at">-r</span> <span class="st">"addpath(genpath('.')); main"</span> <span class="at">-logfile</span> matlab.log</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A similar command on Windows would be:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href=""></a><span class="ex">start</span> matlab <span class="at">-nosplash</span>  <span class="at">-minimize</span> <span class="at">-r</span>  <span class="st">"addpath(genpath('.'));main"</span>  <span class="at">-logfile</span> matlab.log</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-4">
<p>In order to capture screen output in Julia and Python, on Unix-like system (Linux, macOS), the following can be run:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href=""></a><span class="ex">julia</span> main.jl <span class="kw">|</span> <span class="fu">tee</span> main.log</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>or</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href=""></a><span class="ex">python</span> main.py <span class="kw">|</span> <span class="fu">tee</span> main.log</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>which will create a log file with everything that would normally appear on the console using the <code>tee</code> command.</p>
</div>
</div>
</div>
</section>
<section id="takeaways-3" class="slide level2 smaller center">
<h2>Takeaways</h2>
<ul class="task-list">
<li><label><input type="checkbox" checked="">your code runs without problem, after all the debugging.</label></li>
<li><label><input type="checkbox" checked="">your code runs without manual intervention, and with low effort</label></li>
<li><label><input type="checkbox" checked="">it actually produces all the outputs</label></li>
<li><label><input type="checkbox" checked="">your code generates a log file that you can inspect, and that you could share with others.</label></li>
<li><label><input type="checkbox">it will run on somebody else’s computer</label></li>
</ul>
</section></section>
<section>
<section id="environments" class="title-slide slide level1 center">
<h1>Environments</h1>

</section>
<section id="tldr-5" class="slide level2 center">
<h2>TL;DR</h2>
<ul>
<li>Search paths and environments are key concepts to create <strong>portable</strong>, <strong>reproducible</strong> code, by <strong>isolating</strong> each project from others.</li>
<li>Methods exist in all (statistical) programming languages</li>
</ul>
</section>
<section id="what-is-an-environment" class="slide level2 center">
<h2>What is an environment?</h2>
<p>From the <a href="https://rstudio.github.io/renv/">renv</a> documentation:</p>
<ul>
<li><strong>Isolated</strong>: Installing a new or updated package for one project won’t break your other projects, and vice versa.</li>
<li><strong>Portable</strong>: Easily transport your projects from one computer to another, <em>even across different platforms</em>.</li>
<li><strong>Reproducible</strong>: Records the exact package versions you depend on, and ensures those exact versions are the ones that get installed wherever you go.</li>
</ul>
</section>
<section id="what-software-supports-environments" class="slide level2 center">
<h2>What software supports environments?</h2>
<ul>
<li>R: <code>renv</code> package</li>
<li>Python: <code>venv</code> or <code>virtualenv</code> module</li>
<li>Julia: <code>Pkg</code> module</li>
</ul>
</section>
<section id="but-i-use-stata" class="slide level2 center">
<h2>“But I use Stata!”</h2>
</section>
<section id="hold-on" class="slide level2 center">
<h2>Hold on…</h2>
</section>
<section id="understanding-search-paths" class="slide level2 center">
<h2>Understanding search paths</h2>
<p>Generically, all “environments” simply modify where the specific <strong>software searches</strong> (the “search path”) for its components, and in particular any supplementary components (packages, libraries, etc.).<a href="#/footnotes" class="footnote-ref" id="fnref3" role="doc-noteref" data-footnote-href="#/fn3" onclick=""><sup>3</sup></a></p>
<aside></aside></section>
<section id="search-paths" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Search paths</h2>
<div class="columns">
<div class="column" style="width:30%;">
<ul>
<li>R: <code>.libPaths()</code></li>
</ul>
</div><div class="column" style="width:70%;">
<div class="sourceCode" id="cb20" data-code-line-numbers="2-3"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb20-1" class="hljs-ln-code"><a href=""></a><span class="sc">&gt;</span> <span class="fu">.libPaths</span>()</span>
<span id="cb20-2" class="hljs-ln-code"><a href=""></a>[<span class="dv">1</span>] <span class="st">"C:/Users/lv39/AppData/Local/R/win-library/4.3"</span>         </span>
<span id="cb20-3" class="hljs-ln-code"><a href=""></a>[<span class="dv">2</span>] <span class="st">"C:/Users/lv39/AppData/Local/Programs/R/R-4.3.2/library"</span></span>
<span id="cb20-4" class="hljs-ln-code"><a href=""></a>   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="search-paths-1" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Search paths</h2>
<div class="columns">
<div class="column" style="width:30%;">
<ul>
<li>R: <code>.libPaths()</code></li>
<li>Python: <code>sys.path</code></li>
</ul>
</div><div class="column" style="width:70%;">
<div class="sourceCode" id="cb21" data-code-line-numbers="4-9"><pre class="sourceCode numberSource python number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode python hljs"><span id="cb21-1" class="hljs-ln-code"><a href=""></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> sys</span>
<span id="cb21-2" class="hljs-ln-code"><a href=""></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> pprint <span class="im">import</span> pprint</span>
<span id="cb21-3" class="hljs-ln-code"><a href=""></a><span class="op">&gt;&gt;&gt;</span> pprint(sys.path)</span>
<span id="cb21-4" class="hljs-ln-code"><a href=""></a>[<span class="st">''</span>,</span>
<span id="cb21-5" class="hljs-ln-code"><a href=""></a> <span class="st">'C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">lv39</span><span class="ch">\\</span><span class="st">AppData</span><span class="ch">\\</span><span class="st">Local</span><span class="ch">\\</span><span class="st">Programs</span><span class="ch">\\</span><span class="st">Python</span><span class="ch">\\</span><span class="st">Python312</span><span class="ch">\\</span><span class="st">python312.zip'</span>,</span>
<span id="cb21-6" class="hljs-ln-code"><a href=""></a> <span class="st">'C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">lv39</span><span class="ch">\\</span><span class="st">AppData</span><span class="ch">\\</span><span class="st">Local</span><span class="ch">\\</span><span class="st">Programs</span><span class="ch">\\</span><span class="st">Python</span><span class="ch">\\</span><span class="st">Python312</span><span class="ch">\\</span><span class="st">DLLs'</span>,</span>
<span id="cb21-7" class="hljs-ln-code"><a href=""></a> <span class="st">'C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">lv39</span><span class="ch">\\</span><span class="st">AppData</span><span class="ch">\\</span><span class="st">Local</span><span class="ch">\\</span><span class="st">Programs</span><span class="ch">\\</span><span class="st">Python</span><span class="ch">\\</span><span class="st">Python312</span><span class="ch">\\</span><span class="st">Lib'</span>,</span>
<span id="cb21-8" class="hljs-ln-code"><a href=""></a> <span class="st">'C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">lv39</span><span class="ch">\\</span><span class="st">AppData</span><span class="ch">\\</span><span class="st">Local</span><span class="ch">\\</span><span class="st">Programs</span><span class="ch">\\</span><span class="st">Python</span><span class="ch">\\</span><span class="st">Python312'</span>,</span>
<span id="cb21-9" class="hljs-ln-code"><a href=""></a> <span class="st">'C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">lv39</span><span class="ch">\\</span><span class="st">AppData</span><span class="ch">\\</span><span class="st">Local</span><span class="ch">\\</span><span class="st">Programs</span><span class="ch">\\</span><span class="st">Python</span><span class="ch">\\</span><span class="st">Python312</span><span class="ch">\\</span><span class="st">Lib</span><span class="ch">\\</span><span class="st">site-packages'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="search-paths-2" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Search paths</h2>
<div class="columns">
<div class="column smaller" style="width:30%;">
<ul>
<li>R: <code>.libPaths()</code></li>
<li>Python: <code>sys.path</code></li>
<li>Julia: <code>DEPOT_PATH</code> (<a href="https://docs.julialang.org/en/v1/manual/code-loading/">Julia docs</a>)</li>
</ul>
</div><div class="column" style="width:70%;">
<div class="sourceCode" id="cb22" data-code-line-numbers="3-5"><pre class="sourceCode numberSource julia smaller number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode julia hljs"><span id="cb22-1" class="hljs-ln-code"><a href=""></a>julia<span class="op">&gt;</span> <span class="cn">DEPOT_PATH</span></span>
<span id="cb22-2" class="hljs-ln-code"><a href=""></a><span class="fl">3</span><span class="op">-</span>element <span class="dt">Vector</span>{<span class="dt">String</span>}<span class="op">:</span></span>
<span id="cb22-3" class="hljs-ln-code"><a href=""></a> <span class="st">"C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">lv39</span><span class="sc">\\</span><span class="st">.julia"</span></span>
<span id="cb22-4" class="hljs-ln-code"><a href=""></a> <span class="st">"C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">lv39</span><span class="sc">\\</span><span class="st">.julia</span><span class="sc">\\</span><span class="st">juliaup</span><span class="sc">\\</span><span class="st">julia-1.10.0+0.x64.w64.mingw32</span><span class="sc">\\</span><span class="st">local</span><span class="sc">\\</span><span class="st">share</span><span class="sc">\\</span><span class="st">julia"</span></span>
<span id="cb22-5" class="hljs-ln-code"><a href=""></a> <span class="st">"C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">lv39</span><span class="sc">\\</span><span class="st">.julia</span><span class="sc">\\</span><span class="st">juliaup</span><span class="sc">\\</span><span class="st">julia-1.10.0+0.x64.w64.mingw32</span><span class="sc">\\</span><span class="st">share</span><span class="sc">\\</span><span class="st">julia"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="yes-but-what-about-stata" class="slide level2 center">
<h2>“Yes, but what about Stata?”</h2>
<blockquote>
<p>We now have the <strong>ingredients</strong> to understand (project) environments in Stata.</p>
</blockquote>
</section></section>
<section>
<section id="environments-in-stata" class="title-slide slide level1 center">
<h1>Environments in Stata</h1>

</section>
<section id="tldr-6" class="slide level2 center">
<h2>TL;DR</h2>
<ul>
<li>Creating virtual environments in Stata is feasible</li>
<li>Doing so stabilizes the code, and makes it more transportable</li>
</ul>
</section>
<section id="search-paths-in-stata" class="slide level2 smaller center">
<h2>Search paths in Stata</h2>
<p>In Stata, we typically do not talk about environments, but the same basic structure applies: Stata searches along a set order for its commands.</p>
</section>
<section id="search-paths-in-stata-1" class="slide level2 smaller center">
<h2>Search paths in Stata</h2>
<p>Some commands are built into the executable (the software that is opened when you click on the Stata icon), but most other internal, and all external commands, are found in a search path.</p>
</section>
<section id="the-sysdir-directories" class="slide level2 smaller center">
<h2>The <code>sysdir</code> directories</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>The default set of directories which can be searched, from a freshly installed Stata, can be queried with the <code>sysdir</code> command, and will look something like this:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb23-1"><a href=""></a><span class="ot">sysdir</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb24-1"><a href=""></a>   <span class="kw">STATA</span>:  C:\Program Files\Stata18\</span>
<span id="cb24-2"><a href=""></a>    <span class="kw">BASE</span>:  C:\Program Files\Stata18\ado\base\</span>
<span id="cb24-3"><a href=""></a>    <span class="kw">SITE</span>:  C:\Program Files\Stata18\ado\site\</span>
<span id="cb24-4"><a href=""></a>    <span class="ot">PLUS</span>:  C:\Users\lv39\ado\plus\</span>
<span id="cb24-5"><a href=""></a><span class="ot">PERSONAL</span>:  C:\Users\lv39\ado\<span class="kw">personal</span>\</span>
<span id="cb24-6"><a href=""></a>OLDPLACE:  c:\ado\</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="the-adopath-search-order" class="slide level2 smaller center">
<h2>The <code>adopath</code> search order</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>The search paths where Stata looks for commands is queried by <code>adopath</code>, and looks similar, but now has an order assigned to each entry:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb25-1"><a href=""></a><span class="kw">adopath</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb26-1"><a href=""></a>  [1]  (<span class="kw">BASE</span>)      <span class="st">"C:\Program Files\Stata18</span><span class="ch">\a</span><span class="st">do</span><span class="ch">\b</span><span class="st">ase/"</span></span>
<span id="cb26-2"><a href=""></a>  [2]  (<span class="kw">SITE</span>)      <span class="st">"C:\Program Files\Stata18</span><span class="ch">\a</span><span class="st">do\site/"</span></span>
<span id="cb26-3"><a href=""></a>  [3]              <span class="st">"."</span></span>
<span id="cb26-4"><a href=""></a>  [4]  (<span class="ot">PERSONAL</span>)  <span class="st">"C:\Users\lv39</span><span class="ch">\a</span><span class="st">do\personal/"</span></span>
<span id="cb26-5"><a href=""></a>  [5]  (<span class="ot">PLUS</span>)      <span class="st">"C:\Users\lv39</span><span class="ch">\a</span><span class="st">do\plus/"</span></span>
<span id="cb26-6"><a href=""></a>  [6]  (OLDPLACE)  <span class="st">"c:</span><span class="ch">\a</span><span class="st">do/"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="the-path-at-work" class="slide level2 smaller center">
<h2>The path at work</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>To look for a command, Stata will look in the first directory, then the second, and so on, until it finds it. If it does not find it, it will return an error.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb27-1"><a href=""></a>which reghdfe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:60%;">
<pre><code>command reghdfe not found as either built-in or ado-file
r(111);</code></pre>
</div>
</div>
</section>
<section id="where-are-packages-installed" class="slide level2 center">
<h2>Where are packages installed?</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>When we install a package (<code>net install</code>, <code>ssc install</code>)<a href="#/footnotes" class="footnote-ref" id="fnref4" role="doc-noteref" data-footnote-href="#/fn4" onclick=""><sup>4</sup></a>, only one of the (<code>sysdir</code>) paths is relevant: <code>PLUS</code>.</p>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb29" data-code-line-numbers="5"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb29-1"><a href=""></a>  [1]  (<span class="kw">BASE</span>)      <span class="st">"C:\Program Files\Stata18</span><span class="ch">\a</span><span class="st">do</span><span class="ch">\b</span><span class="st">ase/"</span></span>
<span id="cb29-2"><a href=""></a>  [2]  (<span class="kw">SITE</span>)      <span class="st">"C:\Program Files\Stata18</span><span class="ch">\a</span><span class="st">do\site/"</span></span>
<span id="cb29-3"><a href=""></a>  [3]              <span class="st">"."</span></span>
<span id="cb29-4"><a href=""></a>  [4]  (<span class="ot">PERSONAL</span>)  <span class="st">"C:\Users\lv39</span><span class="ch">\a</span><span class="st">do\personal/"</span></span>
<span id="cb29-5"><a href=""></a>  [5]  (<span class="ot">PLUS</span>)      <span class="st">"C:\Users\lv39</span><span class="ch">\a</span><span class="st">do\plus/"</span></span>
<span id="cb29-6"><a href=""></a>  [6]  (OLDPLACE)  <span class="st">"c:</span><span class="ch">\a</span><span class="st">do/"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<aside></aside></section>
<section id="installing-packages" class="slide level2 smaller center">
<h2>Installing packages</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb30-1"><a href=""></a><span class="kw">ssc</span> install reghdfe</span>
<span id="cb30-2"><a href=""></a>which reghdfe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb31" data-code-line-numbers="3|7"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb31-1"><a href=""></a>. <span class="kw">ssc</span> install reghdfe</span>
<span id="cb31-2"><a href=""></a>checking reghdfe consistency and verifying <span class="kw">not</span> already installed...</span>
<span id="cb31-3"><a href=""></a>installing into C:\Users\lv39\ado\plus\...</span>
<span id="cb31-4"><a href=""></a>installation complete.</span>
<span id="cb31-5"><a href=""></a></span>
<span id="cb31-6"><a href=""></a>. which reghdfe</span>
<span id="cb31-7"><a href=""></a>C:\Users\lv39\ado\plus\<span class="fu">r</span>\reghdfe.ado</span>
<span id="cb31-8"><a href=""></a>*! <span class="kw">version</span> 6.12.3 08aug2023</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="using-environments-in-stata" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Using environments in Stata</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>But the <code>(PLUS)</code> directory can be manipulated</p>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb32" data-code-line-numbers="4|13-14"><pre class="sourceCode numberSource stata number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode stata hljs"><span id="cb32-1" class="hljs-ln-code"><a href=""></a>* Set the root directory</span>
<span id="cb32-2" class="hljs-ln-code"><a href=""></a><span class="kw">global</span> rootdir : pwd</span>
<span id="cb32-3" class="hljs-ln-code"><a href=""></a>* Define a location where we will <span class="kw">hold</span> <span class="ot">all</span> packages <span class="kw">in</span> THIS project (the <span class="st">"environment"</span>)</span>
<span id="cb32-4" class="hljs-ln-code"><a href=""></a><span class="kw">global</span> adodir <span class="st">"$rootdir/ado"</span></span>
<span id="cb32-5" class="hljs-ln-code"><a href=""></a>* make sure it exists, <span class="kw">if</span> <span class="kw">not</span> create it.</span>
<span id="cb32-6" class="hljs-ln-code"><a href=""></a>cap <span class="kw">mkdir</span> <span class="st">"$adodir"</span></span>
<span id="cb32-7" class="hljs-ln-code"><a href=""></a>* Now let's simplify the <span class="kw">adopath</span></span>
<span id="cb32-8" class="hljs-ln-code"><a href=""></a>* - remove the OLDPLACE and <span class="ot">PERSONAL</span> paths</span>
<span id="cb32-9" class="hljs-ln-code"><a href=""></a>* - NEVER REMOVE THE SYSTEM-WIDE PATHS - bad things will happen!</span>
<span id="cb32-10" class="hljs-ln-code"><a href=""></a><span class="kw">adopath</span> - OLDPLACE</span>
<span id="cb32-11" class="hljs-ln-code"><a href=""></a><span class="kw">adopath</span> - <span class="ot">PERSONAL</span></span>
<span id="cb32-12" class="hljs-ln-code"><a href=""></a>* modify the <span class="ot">PLUS</span> path to point to our <span class="kw">new</span> location, and move it up <span class="kw">in</span> the <span class="kw">order</span></span>
<span id="cb32-13" class="hljs-ln-code"><a href=""></a><span class="ot">sysdir</span> <span class="kw">set</span> <span class="ot">PLUS</span> <span class="st">"$adodir"</span></span>
<span id="cb32-14" class="hljs-ln-code"><a href=""></a><span class="kw">adopath</span> ++ <span class="ot">PLUS</span></span>
<span id="cb32-15" class="hljs-ln-code"><a href=""></a>* verify the path</span>
<span id="cb32-16" class="hljs-ln-code"><a href=""></a><span class="kw">adopath</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="using-environments-in-stata-1" class="slide level2 smaller center" data-auto-animate="true" data-transition="none">
<h2 data-id="quarto-animate-title">Using environments in Stata</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="sourceCode" id="cb33" data-code-line-numbers="13-14"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb33-1"><a href=""></a>* Set the root directory</span>
<span id="cb33-2"><a href=""></a><span class="kw">global</span> rootdir : pwd</span>
<span id="cb33-3"><a href=""></a>* Define a location where we will <span class="kw">hold</span> <span class="ot">all</span> packages <span class="kw">in</span> THIS project (the <span class="st">"environment"</span>)</span>
<span id="cb33-4"><a href=""></a><span class="kw">global</span> adodir <span class="st">"$rootdir/ado"</span></span>
<span id="cb33-5"><a href=""></a>* make sure it exists, <span class="kw">if</span> <span class="kw">not</span> create it.</span>
<span id="cb33-6"><a href=""></a>cap <span class="kw">mkdir</span> <span class="st">"$adodir"</span></span>
<span id="cb33-7"><a href=""></a>* Now let's simplify the <span class="kw">adopath</span></span>
<span id="cb33-8"><a href=""></a>* - remove the OLDPLACE and <span class="ot">PERSONAL</span> paths</span>
<span id="cb33-9"><a href=""></a>* - NEVER REMOVE THE SYSTEM-WIDE PATHS - bad things will happen!</span>
<span id="cb33-10"><a href=""></a><span class="kw">adopath</span> - OLDPLACE</span>
<span id="cb33-11"><a href=""></a><span class="kw">adopath</span> - <span class="ot">PERSONAL</span></span>
<span id="cb33-12"><a href=""></a>* modify the <span class="ot">PLUS</span> path to point to our <span class="kw">new</span> location, and move it up <span class="kw">in</span> the <span class="kw">order</span></span>
<span id="cb33-13"><a href=""></a><span class="ot">sysdir</span> <span class="kw">set</span> <span class="ot">PLUS</span> <span class="st">"$adodir"</span></span>
<span id="cb33-14"><a href=""></a><span class="kw">adopath</span> ++ <span class="ot">PLUS</span></span>
<span id="cb33-15"><a href=""></a>* verify the path</span>
<span id="cb33-16"><a href=""></a><span class="kw">adopath</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb34" data-code-line-numbers="2"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb34-1"><a href=""></a>. <span class="kw">adopath</span></span>
<span id="cb34-2"><a href=""></a>  [1]  (<span class="ot">PLUS</span>)      <span class="st">"C:\Users\lv39\Documents/PROJECT123/ado/"</span></span>
<span id="cb34-3"><a href=""></a>  [2]  (<span class="kw">BASE</span>)      <span class="st">"C:\Program Files\Stata18</span><span class="ch">\a</span><span class="st">do</span><span class="ch">\b</span><span class="st">ase/"</span></span>
<span id="cb34-4"><a href=""></a>  [3]  (<span class="kw">SITE</span>)      <span class="st">"C:\Program Files\Stata18</span><span class="ch">\a</span><span class="st">do\site/"</span></span>
<span id="cb34-5"><a href=""></a>  [4]              <span class="st">"."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="using-environments-in-stata-2" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Using environments in Stata</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>Let’s verify again where the <code>reghdfe</code> package is:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb35-1"><a href=""></a>which reghdfe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb36" data-code-line-numbers="2"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb36-1"><a href=""></a>. which reghdfe</span>
<span id="cb36-2"><a href=""></a>command reghdfe <span class="kw">not</span> found <span class="kw">as</span> either built-<span class="kw">in</span> <span class="kw">or</span> ado-file</span>
<span id="cb36-3"><a href=""></a><span class="fu">r</span>(111);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="using-environments-in-stata-3" class="slide level2 smaller center" data-auto-animate="true" data-transition="none">
<h2 data-id="quarto-animate-title">Using environments in Stata</h2>
<p>So it is no longer found. Why? Because we have removed the previous location (the old <code>PLUS</code> path) from the search sequence. It’s as if it didn’t exist.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p>Previously:</p>
<div class="sourceCode" id="cb37" data-code-line-numbers="2"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb37-1"><a href=""></a>. which reghdfe</span>
<span id="cb37-2"><a href=""></a>C:\Users\lv39\ado\plus\<span class="fu">r</span>\reghdfe.ado</span>
<span id="cb37-3"><a href=""></a>*! <span class="kw">version</span> 6.12.3 08aug2023</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb38" data-code-line-numbers="2|3|4|5"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb38-1"><a href=""></a>. <span class="kw">adopath</span></span>
<span id="cb38-2"><a href=""></a>  [1]  (<span class="ot">PLUS</span>)      <span class="st">"C:\Users\lv39\Documents/PROJECT123/ado/"</span></span>
<span id="cb38-3"><a href=""></a>  [2]  (<span class="kw">BASE</span>)      <span class="st">"C:\Program Files\Stata18</span><span class="ch">\a</span><span class="st">do</span><span class="ch">\b</span><span class="st">ase/"</span></span>
<span id="cb38-4"><a href=""></a>  [3]  (<span class="kw">SITE</span>)      <span class="st">"C:\Program Files\Stata18</span><span class="ch">\a</span><span class="st">do\site/"</span></span>
<span id="cb38-5"><a href=""></a>  [4]              <span class="st">"."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="installing-packages-when-an-environment-is-active" class="slide level2 smaller center">
<h2>Installing packages when an environment is active</h2>
<p>When we now install <code>reghdfe</code> again:</p>
<div class="sourceCode" id="cb39" data-code-line-numbers="3|7"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb39-1"><a href=""></a>. <span class="kw">ssc</span> install reghdfe</span>
<span id="cb39-2"><a href=""></a>checking reghdfe consistency and verifying <span class="kw">not</span> already installed...</span>
<span id="cb39-3"><a href=""></a>installing into C:\Users\lv39\Documents\PROJECT123\ado\plus\...</span>
<span id="cb39-4"><a href=""></a>installation complete.</span>
<span id="cb39-5"><a href=""></a></span>
<span id="cb39-6"><a href=""></a>. which reghdfe</span>
<span id="cb39-7"><a href=""></a>C:\Users\lv39\Documents\PROJECT123\ado\plus\<span class="fu">r</span>\reghdfe.ado</span>
<span id="cb39-8"><a href=""></a>*! <span class="kw">version</span> 6.12.3 08aug2023</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We now see it in the <strong>project-specific</strong> directory, which we can distribute with the whole project.</p>
</section>
<section id="installing-precise-versions-of-stata-packages" class="slide level2 smaller center">
<h2>Installing precise versions of Stata packages</h2>
<p>Let’s imagine we need an older version of <code>reghdfe</code>.</p>
<ul>
<li>In general, it is <strong>not</strong> possible in Stata to install an older version of a package in a straightforward fashion.</li>
<li>You <em>may</em> have success with the <a href="https://web.archive.org/web/20141226200440/http://fmwww.bc.edu/RePEc/bocode/">Wayback Machine archive of SSC</a>.</li>
</ul>
</section>
<section id="package-repositories" class="slide level2 center">
<h2>Package repositories</h2>
<p>Most package repositories are versioned:</p>
<ul>
<li>R: CRAN, Bioconductor</li>
<li>Python: PyPI</li>
<li>Julia: “General” default Julia package registry.</li>
</ul>
<p>Stata does not (as of 2024). <strong>But</strong> see <a href="https://larsvilhuber.github.io/self-checking-reproducibility/12-environments-in-stata.html#installing-precise-versions-of-packages">the full site</a> for one approach.</p>
</section>
<section id="takeaways-4" class="slide level2 smaller center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Takeaways</h2>
<p>From the earlier desiderata of <em>environments</em>:</p>
<ul>
<li>✅ <strong>Isolated</strong>: Installing a new or updated package for one project won’t break your other projects, and vice versa.</li>
<li>✅ <strong>Portable</strong>: Easily transport your projects from one computer to another, <em>even across different platforms</em>.</li>
<li>❌ <strong>Reproducible</strong>: Records the exact package versions you depend on, and ensures those exact versions are the ones that get installed wherever you go.</li>
</ul>
</section>
<section id="takeaways-5" class="slide level2 smaller center">
<h2>Takeaways</h2>
<ul class="task-list">
<li><label><input type="checkbox" checked="">your code runs without problem, after all the debugging.</label></li>
<li><label><input type="checkbox" checked="">your code runs without manual intervention, and with low effort</label></li>
<li><label><input type="checkbox" checked="">it actually produces all the outputs</label></li>
<li><label><input type="checkbox" checked="">your code generates a log file that you can inspect, and that you could share with others.</label></li>
<li><label><input type="checkbox" checked="">❓ it will run on somebody else’s computer</label></li>
</ul>
</section></section>
<section>
<section id="other-methods" class="title-slide slide level1 center">
<h1>Other methods</h1>

</section>
<section id="non-technical-means" class="slide level2 center">
<h2>Non-technical means</h2>
<ul>
<li>Use a new computer</li>
<li>Have an undergraduate student run it</li>
<li>Ask your office neighbor to run it</li>
</ul>
</section>
<section id="more-technical-means" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">More technical means</h2>
<ul>
<li><a href="https://larsvilhuber.github.io/self-checking-reproducibility/72-virtual_machines.html">Virtual Machines</a></li>
<li><a href="https://larsvilhuber.github.io/self-checking-reproducibility/80-docker.html">Use of containers</a></li>
</ul>
</section>
<section id="use-of-containers" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Use of containers</h2>
<ul>
<li><strong>Containers</strong> are a way to simulate a “computer within a computer”, which can be used to run code in an isolated environment.</li>
<li>They are relatively lightweight, and are <em>starting</em> to be used as part of replication packages in economics (but <strong>only 0.13% of 8280 packages</strong>…)</li>
</ul>
</section>
<section id="use-of-containers-1" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Use of containers</h2>
<ul>
<li>They do not work in all situations, and require some <strong>more advanced technical skills</strong> (typically Linux, in addition to the statistical software).</li>
<li>Using containers to test for reproducibility is easier, and should be considered as part of a toolkit.</li>
<li>Several <strong>online services</strong> make such testing (and development) easy.</li>
</ul>
</section></section>
<section>
<section id="last-but-not-least" class="title-slide slide level1 center">
<h1>Last but not least</h1>

</section>
<section id="confidential-data" class="slide level2 center">
<h2>Confidential data</h2>
<p>Do you know your rights?</p>
</section>
<section id="tldr-7" class="slide level2 center">
<h2>TL;DR</h2>
<ul>
<li>be able to separate the confidential data from other (to be made public) components</li>
<li>all code must be available</li>
<li>do not publish what you are not allowed to!</li>
</ul>
</section>
<section id="permissions" class="slide level2 center">
<h2>Permissions</h2>
<p>These will be noted in the <strong>data use agreement (DUA), license, or non-disclosure agreement (NDA)</strong> that you <strong>signed or clicked through</strong> to obtain access to the data from the data provider.</p>
<blockquote>
<p>Careful: scraped or downloaded data that did not have an explicit license!</p>
</blockquote>
</section>
<section id="keep-in-mind" class="slide level2 center">
<h2>Keep in mind</h2>
<p>Just because</p>
<ul>
<li>you (and the entire world) can <strong>download the data</strong></li>
<li>does <strong>NOT</strong> give you the (automatic) right to <strong>re-publish</strong> the data.</li>
</ul>
</section>
<section id="permissions-1" class="slide level2 smaller center">
<h2>Permissions</h2>
<ul>
<li>Do NOT <strong>transfer or publish</strong> data that you have no rights to transfer. Always carefully read your data use agreement (DUA), license, or non-disclosure agreement (NDA) that you signed.</li>
<li>Do NOT upload restricted-access data to the journal’s platform.</li>
<li>DO structure the repository to take into the account the data that cannot be published.</li>
</ul>
</section>
<section id="communicating-restrictions" class="slide level2 center">
<h2>Communicating restrictions</h2>
<p>Whatever <strong>restrictions</strong> are imposed on the data typically convey to other replicators as well.</p>
<ul>
<li>Document them in the <strong>public</strong> README, in the section about “<a href="https://social-science-data-editors.github.io/template_README/template-README.html#data-availability-and-provenance-statements">Data Availability and Provenance Statements</a>.”</li>
</ul>
</section>
<section id="consider" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Consider</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>A project with confidential and public-use data.</p>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb40-1" class="hljs-ln-code"><a href=""></a><span class="ex">README.pdf</span></span>
<span id="cb40-2" class="hljs-ln-code"><a href=""></a><span class="ex">code/</span></span>
<span id="cb40-3" class="hljs-ln-code"><a href=""></a>    <span class="ex">main.do</span></span>
<span id="cb40-4" class="hljs-ln-code"><a href=""></a>    <span class="ex">01_data_prep.do</span></span>
<span id="cb40-5" class="hljs-ln-code"><a href=""></a>    <span class="ex">02_confidential_prep.do</span></span>
<span id="cb40-6" class="hljs-ln-code"><a href=""></a>    <span class="ex">03_analysis.do</span></span>
<span id="cb40-7" class="hljs-ln-code"><a href=""></a>    <span class="ex">04_figures.do</span></span>
<span id="cb40-8" class="hljs-ln-code"><a href=""></a><span class="ex">data/</span></span>
<span id="cb40-9" class="hljs-ln-code"><a href=""></a>   <span class="ex">raw/</span></span>
<span id="cb40-10" class="hljs-ln-code"><a href=""></a>      <span class="ex">cps0001.dat</span></span>
<span id="cb40-11" class="hljs-ln-code"><a href=""></a>   <span class="ex">confidential/</span></span>
<span id="cb40-12" class="hljs-ln-code"><a href=""></a>      <span class="ex">ssa.csv</span></span>
<span id="cb40-13" class="hljs-ln-code"><a href=""></a>   <span class="ex">conf_analysis/</span></span>
<span id="cb40-14" class="hljs-ln-code"><a href=""></a>      <span class="ex">confidential_combined.dta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="organize-your-project-so-you-can-exclude-confidential-data" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Organize your project so you can exclude confidential data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Clearly separate the restricted from the open-access data, both in terms of the raw data as well as the processed data:</p>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb41" data-code-line-numbers="11,13"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb41-1" class="hljs-ln-code"><a href=""></a><span class="ex">README.pdf</span></span>
<span id="cb41-2" class="hljs-ln-code"><a href=""></a><span class="ex">code/</span></span>
<span id="cb41-3" class="hljs-ln-code"><a href=""></a>    <span class="ex">main.do</span></span>
<span id="cb41-4" class="hljs-ln-code"><a href=""></a>    <span class="ex">01_data_prep.do</span></span>
<span id="cb41-5" class="hljs-ln-code"><a href=""></a>    <span class="ex">02_confidential_prep.do</span></span>
<span id="cb41-6" class="hljs-ln-code"><a href=""></a>    <span class="ex">03_analysis.do</span></span>
<span id="cb41-7" class="hljs-ln-code"><a href=""></a>    <span class="ex">04_figures.do</span></span>
<span id="cb41-8" class="hljs-ln-code"><a href=""></a><span class="ex">data/</span></span>
<span id="cb41-9" class="hljs-ln-code"><a href=""></a>   <span class="ex">raw/</span></span>
<span id="cb41-10" class="hljs-ln-code"><a href=""></a>      <span class="ex">cps0001.dat</span></span>
<span id="cb41-11" class="hljs-ln-code"><a href=""></a>   <span class="ex">confidential/</span></span>
<span id="cb41-12" class="hljs-ln-code"><a href=""></a>      <span class="ex">ssa.csv</span></span>
<span id="cb41-13" class="hljs-ln-code"><a href=""></a>   <span class="ex">conf_analysis/</span></span>
<span id="cb41-14" class="hljs-ln-code"><a href=""></a>      <span class="ex">confidential_combined.dta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="strategy" class="slide level2 smaller center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Strategy</h2>
<p>When the replication package relies on confidential data that cannot be shared, or is shared under different conditions, you should</p>
<ul>
<li>preserve (archive) the confidential replication package
<ul>
<li>If the data cannot be removed from a secure enclave, they should nevertheless be archived wherever the confidential data are kept<a href="#/footnotes" class="footnote-ref" id="fnref5" role="doc-noteref" data-footnote-href="#/fn5" onclick=""><sup>5</sup></a></li>
<li>If the data can be shared, but are subject to access restrictions, follow <a href="creating-separate-data-deposit">this guide on creating a separate data deposit</a> and, when creating the restricted deposit at ICPSR, follow <a href="creating-restricted-data-deposit-icpsr">these instructions on how to do so</a>.</li>
</ul></li>
</ul>
<aside></aside></section>
<section id="strategy-1" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Strategy</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Prepare a <strong>confidential (partial) replication package</strong> <code>project-confidential.zip</code>, contains the contents of <code>data/confidential</code> and possibly <code>data/conf_analysis</code>.</p>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb42" data-code-line-numbers="11-14"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb42-1" class="hljs-ln-code"><a href=""></a><span class="ex">README.pdf</span></span>
<span id="cb42-2" class="hljs-ln-code"><a href=""></a><span class="ex">code/</span></span>
<span id="cb42-3" class="hljs-ln-code"><a href=""></a>    <span class="ex">main.do</span></span>
<span id="cb42-4" class="hljs-ln-code"><a href=""></a>    <span class="ex">01_data_prep.do</span></span>
<span id="cb42-5" class="hljs-ln-code"><a href=""></a>    <span class="ex">02_confidential_prep.do</span></span>
<span id="cb42-6" class="hljs-ln-code"><a href=""></a>    <span class="ex">03_analysis.do</span></span>
<span id="cb42-7" class="hljs-ln-code"><a href=""></a>    <span class="ex">04_figures.do</span></span>
<span id="cb42-8" class="hljs-ln-code"><a href=""></a><span class="ex">data/</span></span>
<span id="cb42-9" class="hljs-ln-code"><a href=""></a>   <span class="ex">raw/</span></span>
<span id="cb42-10" class="hljs-ln-code"><a href=""></a>      <span class="ex">cps0001.dat</span></span>
<span id="cb42-11" class="hljs-ln-code"><a href=""></a>   <span class="ex">confidential/</span></span>
<span id="cb42-12" class="hljs-ln-code"><a href=""></a>      <span class="ex">ssa.csv</span></span>
<span id="cb42-13" class="hljs-ln-code"><a href=""></a>   <span class="ex">conf_analysis/</span></span>
<span id="cb42-14" class="hljs-ln-code"><a href=""></a>      <span class="ex">confidential_combined.dta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="strategy-2" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Strategy</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Prepare a <strong>non-confidential replication package</strong> that contains <strong>all code</strong>, and <strong>any data</strong> that is not subject to publication controls</p>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb43" data-code-line-numbers="1-10"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb43-1" class="hljs-ln-code"><a href=""></a><span class="ex">README.pdf</span></span>
<span id="cb43-2" class="hljs-ln-code"><a href=""></a><span class="ex">code/</span></span>
<span id="cb43-3" class="hljs-ln-code"><a href=""></a>    <span class="ex">main.do</span></span>
<span id="cb43-4" class="hljs-ln-code"><a href=""></a>    <span class="ex">01_data_prep.do</span></span>
<span id="cb43-5" class="hljs-ln-code"><a href=""></a>    <span class="ex">02_confidential_prep.do</span></span>
<span id="cb43-6" class="hljs-ln-code"><a href=""></a>    <span class="ex">03_analysis.do</span></span>
<span id="cb43-7" class="hljs-ln-code"><a href=""></a>    <span class="ex">04_figures.do</span></span>
<span id="cb43-8" class="hljs-ln-code"><a href=""></a><span class="ex">data/</span></span>
<span id="cb43-9" class="hljs-ln-code"><a href=""></a>   <span class="ex">raw/</span></span>
<span id="cb43-10" class="hljs-ln-code"><a href=""></a>      <span class="ex">cps0001.dat</span></span>
<span id="cb43-11" class="hljs-ln-code"><a href=""></a>   <span class="ex">confidential/</span></span>
<span id="cb43-12" class="hljs-ln-code"><a href=""></a>      <span class="ex">ssa.csv</span></span>
<span id="cb43-13" class="hljs-ln-code"><a href=""></a>   <span class="ex">conf_analysis/</span></span>
<span id="cb43-14" class="hljs-ln-code"><a href=""></a>      <span class="ex">confidential_combined.dta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="strategy-3" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Strategy</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Important: the package contains <strong>all code</strong>, including the code that is used to process the <strong>confidential data!</strong></p>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb44" data-code-line-numbers="5"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb44-1" class="hljs-ln-code"><a href=""></a><span class="ex">README.pdf</span></span>
<span id="cb44-2" class="hljs-ln-code"><a href=""></a><span class="ex">code/</span></span>
<span id="cb44-3" class="hljs-ln-code"><a href=""></a>    <span class="ex">main.do</span></span>
<span id="cb44-4" class="hljs-ln-code"><a href=""></a>    <span class="ex">01_data_prep.do</span></span>
<span id="cb44-5" class="hljs-ln-code"><a href=""></a>    <span class="ex">02_confidential_prep.do</span></span>
<span id="cb44-6" class="hljs-ln-code"><a href=""></a>    <span class="ex">03_analysis.do</span></span>
<span id="cb44-7" class="hljs-ln-code"><a href=""></a>    <span class="ex">04_figures.do</span></span>
<span id="cb44-8" class="hljs-ln-code"><a href=""></a><span class="ex">data/</span></span>
<span id="cb44-9" class="hljs-ln-code"><a href=""></a>   <span class="ex">raw/</span></span>
<span id="cb44-10" class="hljs-ln-code"><a href=""></a>      <span class="ex">cps0001.dat</span></span>
<span id="cb44-11" class="hljs-ln-code"><a href=""></a>   <span class="ex">confidential/</span></span>
<span id="cb44-12" class="hljs-ln-code"><a href=""></a>      <span class="ex">ssa.csv</span></span>
<span id="cb44-13" class="hljs-ln-code"><a href=""></a>   <span class="ex">conf_analysis/</span></span>
<span id="cb44-14" class="hljs-ln-code"><a href=""></a>      <span class="ex">confidential_combined.dta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="strategy-4" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Strategy</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Ensure that replicators have detailed instructions (<strong>README</strong>) on how to combine the two packages</li>
<li>Specify which (if any) of the results in their paper can be reproduced without the confidential data.</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb45" data-code-line-numbers="1-1"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb45-1" class="hljs-ln-code"><a href=""></a><span class="ex">README.pdf</span></span>
<span id="cb45-2" class="hljs-ln-code"><a href=""></a><span class="ex">code/</span></span>
<span id="cb45-3" class="hljs-ln-code"><a href=""></a>    <span class="ex">main.do</span></span>
<span id="cb45-4" class="hljs-ln-code"><a href=""></a>    <span class="ex">01_data_prep.do</span></span>
<span id="cb45-5" class="hljs-ln-code"><a href=""></a>    <span class="ex">02_confidential_prep.do</span></span>
<span id="cb45-6" class="hljs-ln-code"><a href=""></a>    <span class="ex">03_analysis.do</span></span>
<span id="cb45-7" class="hljs-ln-code"><a href=""></a>    <span class="ex">04_figures.do</span></span>
<span id="cb45-8" class="hljs-ln-code"><a href=""></a><span class="ex">data/</span></span>
<span id="cb45-9" class="hljs-ln-code"><a href=""></a>   <span class="ex">raw/</span></span>
<span id="cb45-10" class="hljs-ln-code"><a href=""></a>      <span class="ex">cps0001.dat</span></span>
<span id="cb45-11" class="hljs-ln-code"><a href=""></a>   <span class="ex">confidential/</span></span>
<span id="cb45-12" class="hljs-ln-code"><a href=""></a>      <span class="ex">ssa.csv</span></span>
<span id="cb45-13" class="hljs-ln-code"><a href=""></a>   <span class="ex">conf_analysis/</span></span>
<span id="cb45-14" class="hljs-ln-code"><a href=""></a>      <span class="ex">confidential_combined.dta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section></section>
<section id="questions" class="title-slide slide level1 center">
<h1>Questions</h1>

</section>

<section>
<section id="section" class="title-slide slide level1 center">
<h1></h1>

</section>
<section id="this-presentation" class="slide level2 center">
<h2>This presentation</h2>
<ul>
<li><a href="https://github.com/larsvilhuber/self-checking-reproducibility">Github</a></li>
<li><a href="https://larsvilhuber.github.io/self-checking-reproducibility/presentation/">Presentation</a></li>
</ul>
<p>Content is <a href="https://creativecommons.org/licenses/by-nc/4.0/"><img data-src="https://licensebuttons.net/l/by-nc/4.0/80x15.png" alt="License: CC BY-NC 4.0"></a>.</p>
</section>
<section id="references" class="slide level2 center">
<h2>References</h2>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
<section id="footnotes" class="footnotes footnotes-end-of-document smaller scrollable" role="doc-endnotes"><h2>Footnotes</h2>

<ol>
<li id="fn1"><p>Source: <a href="https://www.pngall.com/warning-sign-png/download/69408">Red Warning PNG Clipart</a>, CC-BY.</p></li>
<li id="fn2"><p>Results computed on Nov 26, 2023 based on a scan of replication packages conducted by Sebastian Kranz. 2023. “Economic Articles with Data”. https://ejd.econ.mathematik.uni-ulm.de/, searching for the words <code>main</code>, <code>master</code>, <code>makefile</code>, <code>dockerfile</code>, <code>apptainer</code>, <code>singularity</code> in any of the program files in those replication packages. Code not yet integrated into this presentation.</p></li>
<li id="fn3"><p>Formally, this is true for operating systems as well, and in some cases, the operating system and the programming language interact (for instance, in Python).</p></li>
<li id="fn4"><p><a href="https://www.stata.com/manuals/rnet.pdf"><code>net install</code> refererence</a>. Strictly speaking, the location where ado packages are installed can be changed via the <code>net set ado</code> command, but this is rarely done in practice, and we won’t do it here.</p></li>
<li id="fn5"><p><a href="https://social-science-data-editors.github.io/guidance/FAQ.html#how-can-i-ensure-that-the-confidential-data-is-preserved">see this FAQ</a>)</p></li>
</ol>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>